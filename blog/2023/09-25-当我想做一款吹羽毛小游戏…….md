![logo](https://poketto.oss-cn-hangzhou.aliyuncs.com/logo.png)

## èƒŒæ™¯

æœ€è¿‘åœ¨Bç«™æœ‰ä¸€æ¬¾ã€Œæä½³ç¦å¹ç¾½æ¯›ã€çš„æ¸¸æˆéå¸¸ç«ï¼Œæˆ‘ä¹Ÿå»è¯¦ç»†çœ‹äº†ï¼Œè§‰å¾—è„‘æ´å¤§å¼€ï¼Œéå¸¸æœ‰è¶£ã€‚

![image-20230925090726811](https://poketto.oss-cn-hangzhou.aliyuncs.com/41jq3t.jpg)

æ— å¥ˆè¯¥æ¬¾æ¸¸æˆUPä¸»ç”±äºæ¡†æ¶é€‰å‹åŸå› åªæœ‰pcç‰ˆçš„ï¼Œå¾ˆä¸æ–¹ä¾¿ã€‚

è€ƒè™‘åˆ°æˆ‘å¾ˆå–œæ¬¢åŸºäº React åšäº›ç½‘é¡µç«¯éšæ—¶å¯ç”¨çš„å·¥å…·ï¼Œå› æ­¤æ‰“ç®—ä¹Ÿè¯•ç€å®ç°ä¸€ç•ªï¼Œå…¶ä¸­è¯ç”Ÿäº†ä¸€äº›æ€è€ƒä¸ç»éªŒï¼Œç‰¹æ­¤åˆ†äº«ä¸€ä¸‹ã€‚

## ç›®æ ‡è®¾è®¡

æŒ‰ç…§ UP ä¸»çš„è®¾è®¡ï¼Œç›®æ ‡æ˜¯ä¸€æ¬¾ 2D æ¸¸æˆï¼Œé‡Œé¢æœ‰æ¸¸æˆçŠ¶æ€åŒºã€ç©å®¶ã€å¤©ç©ºï¼ˆä¸€æ’èŠ±è¥¿å­çœ‰ç¬”ï¼‰ï¼Œå’Œé“å…·ï¼ˆåˆ†ç¾½æ¯›å’Œé‡‘å¸ï¼‰ä¸¤ç§ï¼Œä»¥åŠä¸€äº›å…¶ä»–çš„æ¨¡å‹ä¸åŠ¨ç”»æ•ˆæœï¼Œæ¯”å¦‚å¹çš„æ—¶å€™ä¼šæœ‰æ°”æµç­‰ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç¾½æ¯›åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šç¼“æ…¢é™è½ï¼Œç›®æµ‹æ˜¯å›ºå®šçš„é€Ÿåº¦ï¼Œè¿™è¯´æ˜æˆ‘ä»¬ä¸éœ€è¦åŸºäºé‡åŠ›ç³»ç»Ÿå®ç°è¿™æ¬¾æ¸¸æˆï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç¬¬ä¸€ç‰ˆå®ç°çš„æ—¶å€™é‡‡å–çš„æ–¹æ¡ˆï¼Œä½†æ˜¯æœ‰ä¸ªç¼ºç‚¹ï¼Œé‚£å°±æ˜¯ä¾æ—§è¦å¤„ç†ç¾½æ¯›è¢«å¹æ—¶çš„åŠ é€Ÿåº¦å˜åŒ–ï¼ˆä»¥çœ‹èµ·æ¥åƒæ˜¯çœŸåœ°è¢«å¹äº†ä¸€æ ·ï¼‰ã€‚

### V1 æ¢¦å¼€å§‹çš„åœ°æ–¹

æˆ‘ä»¬ä¸€å¼€å§‹æ˜¯æ‰‹å†™äº†è¿™æ ·çš„åŠ é€Ÿåº¦å˜åŒ–ï¼Œå…·ä½“è€Œè¨€ï¼Œæˆ‘ä»¬é¦–å…ˆç»™å®šæ¯ç‰‡ç¾½æ¯›çš„åˆå§‹é€Ÿåº¦ä¸ºæ¯”å¦‚è¯´ 0.3ï¼Œç„¶åä¸€æ—¦ä»¥åŠ› F å¹äº†ä¹‹åï¼Œé€Ÿåº¦å˜ä¸º 0.3 - F ï¼ˆæ¯”å¦‚è¯´ -0.2ï¼Œè¿™æ ·å°±åæ–¹å‘è¿åŠ¨äº†ï¼‰ï¼Œæ¥ç€å†åœ¨æ¯ä¸€ä¸ª tick ä¸æ–­å›å‡å…¶é€Ÿåº¦åˆ°åŸå§‹é€Ÿåº¦ï¼Œè¿™æ ·å°±æ¨¡æ‹Ÿå‡ºäº†ä¸€ä¸ªæŠ›ç‰©å¢é€Ÿçš„æ•ˆæœã€‚

è¿™æ˜¯åœ¨çº¯æ‰‹åŠ¨å®ç°ä¸Šå”¯ä¸€ä¸€ä¸ªæ¯”è¾ƒç»†èŠ‚çš„ç‚¹ï¼Œå…¶ä»–å°±è¿˜å¥½äº†ã€‚å°±è¿™æ ·ï¼Œæˆ‘ä»¬å¾ˆå¿«è®¾è®¡å‡ºäº†ç¬¬ä¸€ç‰ˆæœ‰åŠ å‡é€Ÿçš„ç‰ˆæœ¬ã€‚

![IMG_2928](https://poketto.oss-cn-hangzhou.aliyuncs.com/9f5ych.png)

### V2 ä¼Ÿå¤§ä½†å¤±è´¥çš„å¤šäººæ··æˆ˜æ¨¡å‹

å½“ç„¶ï¼Œä»¥ä¸Šçš„æ¸¸æˆè®¾è®¡è¿˜è¿œä¸èƒ½è®©æˆ‘ä»¬æ„Ÿåˆ°æ»¡æ„ï¼Œå€’ä¸æ˜¯ UI å±‚é¢ï¼Œè€Œæ˜¯é€»è¾‘å±‚é¢ï¼Œè§‰å¾—å¤ªç®€å•äº†ã€‚å…¶å®å¦‚æœç»†å¿ƒçš„è¯å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ç‰ˆå°±å’Œ UP ä¸»çš„è®¾è®¡ä¸ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºæ²¡æœ‰äº†èŠ±è¥¿å­çœ‰ç¬”ï¼Œè¿™æ ·å°±æ²¡æœ‰äº†ç¾½æ¯›æ’åˆ°èŠ±è¥¿å­çœ‰ç¬”å˜æˆèŠ±è¥¿å¸çš„æœºåˆ¶äº†ï¼Œåªèƒ½ç©å®¶ä¹‹é—´äº’ç›¸å¹æ¥å¹å»ï¼Œå› æ­¤éœ€è¦åšå¤šäººåœ¨çº¿ã€‚

æ­¤æ—¶ï¼Œæˆ‘å¿ƒä¸­ä¸€ä¸ªå¤§å‹å¤šäººåœ¨çº¿çš„æƒ³æ³•èŒåŠ¨äº†å‡ºæ¥ï¼Œæ—¢ç„¶å¤§å®¶åªéœ€è¦æŠŠç¾½æ¯›å¹æ¥å¹å»ï¼Œé‚£å…¶å®äººæ•°ï¼ˆåœ¨å¸¦å®½å…è®¸çš„æƒ…å†µä¸‹ï¼‰å¯ä»¥æ— é™å¤šï¼Œæˆ‘ä»¬åªéœ€è¦æ‰€æœ‰äººç­‰åˆ†ä¸€ä¸ªåœ†å³å¯ï¼

äºæ˜¯ï¼Œä¸€ä¸ªè‡ªè§‰å¤©æ‰çš„æƒ³æ³•å°±è¯ç”Ÿäº†ï¼š

![35da072b4f37e1f4cf43376ee9636e9d](https://poketto.oss-cn-hangzhou.aliyuncs.com/4gajx6.png)

ä¸Šè¿°æ¨¡å‹å¯ä»¥åˆ†æˆæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­æœåŠ¡ç«¯æ˜¯ä¸ªåœ†çš„ä¸–ç•Œæ¨¡å‹ï¼Œæ‰€æœ‰ç”¨æˆ·å‡åŒ€åˆ†æ•£åœ¨åœ†ç¯ä¸Šï¼Œè€Œå®¢æˆ·ç«¯ï¼ˆä¹Ÿå°±æ˜¯ç”¨æˆ·ç•Œé¢ï¼‰ä¸Šæ˜¯ä¸€ä¸ªç”¨æˆ·è§†è§’çš„çŸ©å½¢ï¼Œå…¶ä¸­ä¸‹åŠçŸ©å½¢å¯¹åº”ä¸–ç•Œæ¨¡å‹ç©å®¶ä¾§çš„ 1/N åŒºåŸŸï¼Œä¸Šç­çŸ©å½¢åˆ™å¯¹åº”ä¸–ç•Œæ¨¡å‹å¯¹æ‰‹ä¾§çš„ (N-1)/N åŒºåŸŸã€‚

![IMG_2953](https://poketto.oss-cn-hangzhou.aliyuncs.com/dceyv4.jpg)

ä½†ç”±äºæˆ‘ä»¬æ—¶é—´ä»“ä¿ƒï¼Œè¿™ä¸ªæ¨¡å‹ï¼Œè™½ç„¶å®ç°äº†ï¼Œä½†æ˜¯æœ‰bugï¼Œå°±æ˜¯å„ç§è§’åº¦æ¢ç®—å•¥çš„ï¼Œå…¶å®æ²¡ç®—æ˜ç™½ã€‚

ç»“æœå°±è¢«æˆ‘ä»¬çš„äº§å“ç»ç†ç»™ç äº†ï¼Œå› ä¸ºå¥¹é¦–å…ˆéå¸¸ä¸åŒæ„æŠŠ UI åšæˆçŸ©å½¢ï¼Œå› ä¸ºè¿™æ˜¯ä¸ª 2D æ¸¸æˆï¼Œ2Dæ¸¸æˆä¸€èˆ¬è¦è®©æ‰€æœ‰ç©å®¶çœ‹åˆ°ç›¸åŒçš„æ¸¸æˆç•Œé¢ï¼ˆä¾‹å¦‚ä¸‰å›½æ€ä¹‹ç±»ï¼‰ï¼Œè¿™ä¹ˆæï¼Œæ¯ä¸ªç”¨æˆ·çš„è§†è§’ä¸ä¸€æ ·ï¼Œä¸€èˆ¬æ˜¯ 3D çš„åšæ³•ã€‚

å…¶æ¬¡ï¼Œä¹Ÿä¼šè®©ç”¨æˆ·è¯¯ä¼šï¼Œä»¥ä¸ºè‡ªå·±æ˜¯ 1 VS (N-1)ã€‚

å…¶å®ä»”ç»†çœ‹æˆ‘ä»¬çš„ä¸–ç•Œæ¨¡å‹å¯ä»¥å‘ç°ï¼Œå¦‚æœæˆ‘ä»¬çš„ç¾½æ¯›æ¯æ¬¡ä»ä¸–ç•Œä¸­å¿ƒéšæœºæ–¹å‘å‘å‡ºï¼Œç„¶åè¢«ç©å®¶å¹ååˆé€†å‘è¿”å›ï¼Œåˆ™æ‰€æœ‰çš„ç©å®¶å¹³å‡ä¸‹æ¥å…¶å®éƒ½æ˜¯ 1 v 1ï¼Œå…¶ä¸­ç©å®¶æ•°é‡ä¸ºå¶æ•°æ—¶æ­£å¥½å¯¹ç§°ï¼Œä¸ºå¥‡æ•°æ—¶åˆ™å½¢æˆç¯ã€‚ï¼ˆæˆ‘ä¸€å¼€å§‹å°±è€ƒè™‘è¿‡è¿™ä¸ªé—®é¢˜ï¼Œå¹¶å‡†å¤‡è®¾è®¡å¦‚æœç©å®¶æ˜¯å¶æ•°ï¼Œåˆ™å˜æˆç»„é˜Ÿæ¨¡å¼ï¼ˆå› ä¸ºå¯ä»¥æ­£å¥½åˆ†æˆä¸¤é˜Ÿï¼‰ã€‚ï¼‰

ç»¼åˆåˆ†æä¸‹æ¥ç¡®å®å¾—ä¸å¿å¤±ï¼Œæˆ‘ä»¬æš‚æ—¶æ²¡æœ‰å¿…è¦åšæˆè¿™æ ·ï¼Œå¤æ‚è¿˜ä¸ä¸€å®šä¹°å•ã€‚

ä¸è¿‡æˆ‘ä»¬çš„äº§å“ç»ç†å€’ä¹Ÿå¹¶ä¸åå¯¹æœ‰ä¸€ä¸ªåœ†å½¢çš„ä¸–ç•Œæ¨¡å‹ï¼Œä½†å¥¹æ›´å»ºè®®åœ¨å®¢æˆ·ç«¯ä¸Šåšæˆä¸€ä¸ªåœ†æˆ–è€…æ¤­åœ†ã€‚è€Œç°åœ¨çš„çŸ©å½¢â€¦â€¦è™½ç„¶æˆ‘è§‰å¾—åªæ˜¯æ›²ç‡çš„åŒºåˆ«â€¦â€¦

æˆ‘ç”šè‡³æƒ³è¿‡ç»™ç”¨æˆ·æä¾›ä¸€ä¸ªä¸€é”®åˆ‡æ¢ UI æ¨¡å¼çš„æŒ‰é’®ï¼Œè®©ç”¨æˆ·å¯ä»¥åœ¨çŸ©å½¢ UI ä¸åœ†å½¢ UI ä¹‹é—´åˆ‡æ¢ï¼Œä½†å¿…é¡»æ‰¿è®¤ï¼Œè¿™ç¡®å®æ˜¯åæŠ€æœ¯è§’åº¦çš„æ€è€ƒï¼ŒçŸ©å½¢ UI çœŸåœ°æœ‰å¾ˆå¤§çš„é—®é¢˜ã€‚

æˆ‘è‡ªå·±ä¸¾ä¸ªè§‰å¾—åˆ«æ‰­çš„åœ°æ–¹å§ï¼Œæˆ‘ä»¬åˆšåˆšè¯´äº†çŸ©å½¢ä¸Šä¸‹åŒºåŸŸå¯¹åº”çš„ä¸–ç•Œæ¨¡å‹é¢ç§¯æ˜¯ä¸ä¸€æ ·çš„ï¼ˆ 1 : n-1 ï¼‰ï¼Œè¿™å¯¼è‡´ä¸€ä¸ªä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬çš„ç¨‹åºè¿è¡Œæ— è¯¯ï¼Œåœ¨å¤šäººæ¨¡å¼ä¸‹ï¼Œç¾½æ¯›ä»è‡ªå·±è¿™è¾¹é£è¿‡â€œæ¥šæ²³æ±‰ç•Œâ€ï¼ˆä¹Ÿå°±æ˜¯ä¸–ç•Œä¸­å¿ƒï¼‰åï¼Œç¾½æ¯›ä¼šç¬é—´å˜å°ä¸º 1/(n-1)ï¼Œå¹¶ä¸”ä¼šäº§ç”Ÿ x è½´çš„ shiftï¼Œå› ä¸ºæ¯”ä¾‹è¢«å‹ç¼©äº†ï¼Œæˆ‘è§‰å¾—è¿™æ˜¯ä½“éªŒå¾ˆä¸å¥½çš„ã€‚

æœ€åè€ƒè™‘åˆ°æ—¶é—´æˆæœ¬ï¼Œæˆ‘ä»¬æš‚æ—¶å…ˆæç½®äº†æ¢ç®— bugï¼Œå¼€å§‹ V3 çš„è®¡åˆ’ã€‚

### V3 åªè¦è‚¯æ”¾å¼ƒï¼Œä¸‡äº‹æ— éš¾äº‹

åœ¨äº§å“ç»ç†çš„è€³æé¢å‘½ä¸‹ï¼Œæˆ‘ä»¬æ·±åˆ»åœ°å¸å–äº† V2 çš„æ•™è®­ï¼Œå†³å®šå…ˆå®Œç¾å¤åˆ» UP ä¸»çš„äº§å“ï¼Œå®ˆä½åˆå¿ƒã€‚

äºæ˜¯ï¼Œå­å­å­ï¼Œå¾ˆå¿«ï¼Œæˆ‘ä»¬æœ‰äº† UI æœ€é…·ç‚«çš„ä¸€ç‰ˆã€‚

![IMG_3007](https://poketto.oss-cn-hangzhou.aliyuncs.com/hqgp8m.png)

åœ¨è¿™ä¸€ç‰ˆä¸­ï¼Œæˆ‘ä»¬æ·±åˆ»åˆ†æäº†æ¸¸æˆéœ€è¦ç»å¯¹ä½ç½®çš„æ¦‚å¿µï¼Œå› æ­¤è‡ªå·±å°è£…äº†ä¸€äº›â€œæ¸¸æˆç»„ä»¶â€ï¼Œå¹¶ä¸”ä¸ºäº†æµ‹è¯•å„ç§ `translate`ï¼Œè¿˜é¢å¤–åŠ äº† debug çš„ UI åŠŸèƒ½ï¼š

![IMG_2988](https://poketto.oss-cn-hangzhou.aliyuncs.com/vw8n25.png)

åªè¦å¼€å¯æµ‹è¯•æ¨¡å¼ï¼Œå°±å¯ä»¥å®æ—¶æ˜¾ç¤ºæ¯ä¸ªå…ƒç´ çš„å‡†å¿ƒä¸è¾¹ç•Œï¼Œéå¸¸å¥½ç”¨ã€‚

ï¼ˆä¸è¿‡åæ¥æˆ‘åœ¨ä½¿ç”¨ phaser æ—¶å‘ç°äººå®¶ä¹Ÿæœ‰è¿™ç§è®¾è®¡ï¼Œå¹¶ä¸”è¿˜æ˜¾ç¤ºç‰©ä½“çš„é€Ÿåº¦ä¸åŠ é€Ÿåº¦ï¼Œæ›´ä¸“ä¸šï¼ï¼‰

è¿™ç‚¹ç»™æˆ‘çš„å¯ç¤ºï¼ŒçœŸåœ°æ˜¯ï¼Œä¸–é—´çš„æ™ºæ…§æ˜¯ç›¸é€šçš„ï¼Œæ¯”å¦‚çœ‹è¿™ä¸ªäººçš„è¯„è®ºï¼š

![947a5e4cd03b1cbd20ddeb7d023edd50](https://poketto.oss-cn-hangzhou.aliyuncs.com/dz2aoc.png)

okï¼Œæš‚æ—¶å…ˆä¸æ‰¯å¤ªè¿œï¼Œæ€»ä¹‹ï¼Œå¦‚æ‚¨ä»¬æ‰€è§ï¼Œç¬¬ä¸‰ç‰ˆåœ¨æ”¾å¼ƒæ¢¦æƒ³ä¹‹åï¼Œè€è€å®å®åšå•æœºï¼ŒåŠ å…¥èŠ±è¥¿å­å£çº¢ï¼Œä¸€åˆ‡å°±éå¸¸é¡ºåˆ©ï¼Œç”šè‡³è¿˜æœ‰æ—¶é—´æ¢ä¸Šäº†é…·ç‚«çš„èƒŒæ™¯åŠ¨ç”»ï¼Œä»¥åŠå„ç§é©¬é‡Œå¥¥çš„ bgm å’Œ ç‰¹æ•ˆã€‚è¿™ä¸€ç‰ˆæ˜¯æˆ‘æœ€å–œæ¬¢çš„ä¸€ç‰ˆï¼Œå°¤å…¶æ˜¯åœ¨ UIUX ä¸Šã€‚

ä½†æ˜¯ï¼Œå¾ˆå¯æƒœï¼Œäº§å“ç»ç†é©¬ä¸Šå°±æŒ‡å‡ºäº†æ–°çš„é—®é¢˜ï¼šæ‰å¸§ä¸¥é‡ï¼

ä¸ºæ­¤ï¼Œæˆ‘å¼€å¯äº†æ…¢æ…¢åœ°è°ƒè¯•ä¸æ‘¸ç´¢ä¹‹è·¯ï¼Œç»§è€ŒçœŸæ­£é¢†ä¼šäº†æ¸¸æˆå¼€å‘çš„å¥¥ç§˜ã€‚

### V4 æ¸¸æˆå¼€å‘çš„å·¦æ‰‹ï¼šæ¸²æŸ“å¼•æ“ï¼

ç»è¿‡å¤§é‡çš„è°ƒè¯•ï¼Œæˆ‘é€æ­¥æ’é™¤äº†æ¡©æœåŠ¡å™¨ã€å¤šæ¬¡setStateã€hook memo ç­‰å¯èƒ½çš„æ€§èƒ½é—®é¢˜ï¼ŒæŸ¥é˜…äº†å¤§é‡èµ„æ–™ï¼Œæœ€ç»ˆä¸å¾—ä¸æ‰¿è®¤ï¼ŒåŸºäºçŠ¶æ€ç®¡ç†çš„ react æ ¹æœ¬ä¸é€‚åˆä½œä¸ºé«˜åˆ·æ¸¸æˆçš„è½½ä½“ï¼Œä»…ä»…æ˜¯ 79 ä¸ªç¾½æ¯›ä¸é‡‘å¸ï¼ŒæœåŠ¡ç«¯ 50 çš„ fpsï¼Œå®¢æˆ·ç«¯ UI ç«Ÿç„¶èƒ½å¡åˆ°åªå‰© 10 fpsï¼Œè¿™ç»å¯¹æ˜¯æ— æ³•æ¥å—çš„ã€‚

![0ba6a341303b5c06f42264ad9b9221e4](https://poketto.oss-cn-hangzhou.aliyuncs.com/rbj11v.jpg)

ä½†åŒæ ·çš„ä»£ç ï¼Œæˆ‘ä»¬ä½¿ç”¨ `react-three-fiber` ï¼ˆåº•å±‚åŸºäº `webgl`ä¸`canvas`ï¼‰å´èƒ½å®Œç¾è¿è¡Œï¼Œå®¢æˆ·ç«¯ UI å°‘è¯´ä¹Ÿèƒ½ç¨³å®šåœ¨ 30 fps ä»¥ä¸Šï¼

æˆ‘ä¸ç›¸ä¿¡ï¼Œåˆåšäº†å¤§é‡çš„è°ƒä¼˜ï¼Œæœ€åè¿˜æ˜¯ä¸å¾—ä¸æ”¾å¼ƒï¼Œé™¤éæˆ‘æ”¹å†™æ•´ä¸ª react çš„çŠ¶æ€åˆ·æ–°ï¼Œæ¯”å¦‚ 79 ä¸ªç¾½æ¯›å’Œé‡‘å¸ ä¸è¦ç”¨ `setState` ä¹‹ç±»ï¼Œè€Œæ˜¯è‡ªå·±ç”» `canvas` æˆ–è€…ç”¨ `ref` æ›´æ–°å•¥çš„ï¼Œä½†æ€»ä¹‹ï¼Œè¿™ä¸ªå·¥ä½œé‡ï¼Œæˆ–è€…è¯´ç›®æ ‡å®ç°ï¼Œå…¶å®å°±ç­‰äºé‡æ–°ç”¨ä¸€å¥—æ–°çš„æ¸²æŸ“å¼•æ“äº†ï¼Œè€Œè¿™ä¸€å¥—å¼•æ“ï¼Œæˆ‘é‡ç‚¹æŸ¥äº†ä¸€ä¸‹ï¼Œå¤§è‡´æœ‰ `pixijs` ã€`threejs`ã€`phaser`ç­‰ç­‰ã€‚

æœ€ç»ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ `react-three-fiber`ï¼ˆ `threejs`çš„`react`ç‰ˆï¼‰ï¼Œå®Œæˆäº†æˆ‘ä»¬ç¬¬å››ç‰ˆçš„æ¸¸æˆè®¾è®¡ï¼Œå¹¶åœ¨è®¾ç½®èœå•é‡Œæä¾›äº†æ¸²æŸ“æ¨¡å‹çš„åˆ‡æ¢ï¼Œå¤§å®¶å¯ä»¥åˆ‡æ¢åä»”ç»†å¯¹æ¯”ä¸¤ç§æ¸²æŸ“å¼•æ“ä¸‹çš„æ€§èƒ½å·®å¼‚ï¼ˆè‡³å°‘ 2 å€ï¼Œå®é™…æ˜¯å·®ä¸€ä¸ªæ•°é‡çº§ï¼‰ã€‚

### V7 æ¸¸æˆå¼€å‘çš„å³æ‰‹ï¼šæ¸¸æˆå¼•æ“ï¼

æ—¢ç„¶æˆ‘ä»¬å·²ç»æŠŠç›®å…‰ä»ä¼ ç»Ÿçš„ react å¼€å‘è½¬å‘äº†æ¸²æŸ“å¼•æ“ï¼Œé‚£ä¹ˆæœ€åä¸€æ­¥ï¼Œç›´æ¥ä½¿ç”¨ä¸“ä¸šçš„æ¸¸æˆå¼•æ“è¿›ä¸€æ­¥åŠ é€Ÿç ”å‘ï¼Œå°†æˆä¸ºäº†ä¸€ä¸ªè‡ªç„¶çš„é€‰æ‹©ï¼Œæ‰€è°“æ¸¸æˆå¼•æ“ï¼Œå°±æ˜¯é›†æˆäº† åˆ·æ–°ã€äº¤äº’ã€æ¸²æŸ“ç­‰ä¸€æ•´å¥—æ¸¸æˆé€»è¾‘ï¼Œä»¥æ€§èƒ½ã€å…¼å®¹æ€§ç­‰ä¸ºä¸»è¦ç›®æ ‡çš„æ¡†æ¶ã€‚

æˆ‘ä¸»è¦æŸ¥çœ‹äº†ä»¥ä¸‹èµ„æ–™ï¼š

- âš›ï¸ React | Web Game Dev, https://www.webgamedev.com/engines-libraries/react
- React for game development? : r/reactjs, https://www.reddit.com/r/reactjs/comments/dnfld6/react_for_game_development/
- Does it make sense to use React for canvas game GUI, that will get updated VERY frequently? : r/reactjs, https://www.reddit.com/r/reactjs/comments/14sl7fl/does_it_make_sense_to_use_react_for_canvas_game/
- Collection: JavaScript Game Engines, https://github.com/collections/javascript-game-engines
- Top 6 JavaScript and HTML5 game engines - LogRocket Blog, https://blog.logrocket.com/best-javascript-html5-game-engines/
- compare with three.js Â· Issue #39 Â· pixijs/pixijs, https://github.com/pixijs/pixijs/issues/39
- Phaser vs PixiJS for making 2D games - DEV Community, https://dev.to/ritza/phaser-vs-pixijs-for-making-2d-games-2j8c#:~:text=Phaser%20has%20more%20game%2Dspecific,organized%20for%20games%20by%20default.

å¹¶ä¸”åœ¨ç®€å•å°è¯•äº† star 70 å¤š k çš„ `GoDot` ä¹‹åï¼Œè§‰å¾—è¿˜æ˜¯ä¸å¤ªä¹ æƒ¯æœ‰ UI Editor çš„æ¸¸æˆæ¡†æ¶ï¼Œä»¥åŠä¸å¤ªæƒ³å­¦æ–°çš„è¯­è¨€ï¼ˆGDScriptï¼‰ã€‚ä½†ä¸æ’é™¤æœªæ¥ä¼šæœ‰æ·±åº¦ç ”ç©¶ä½¿ç”¨ `GoDot` çš„å¯èƒ½ï¼Œæ¯•ç«Ÿå®ƒ 2Dã€3Déƒ½æ”¯æŒï¼Œè€Œä¸”æ˜¯è·¨ç«¯çš„ï¼Œä¼šåŸºäºç›®æ ‡è¾“å‡ºå¹³å°å†³å®šæ‰€ä½¿ç”¨çš„æ€§èƒ½ï¼Œè¿™ä¸ªéå¸¸æ£’ã€‚

![image-20230925091822199](https://poketto.oss-cn-hangzhou.aliyuncs.com/aez70g.jpg)

![image-20230925092037914](https://poketto.oss-cn-hangzhou.aliyuncs.com/7pbkjd.jpg)

ï¼ˆå¥½å§ï¼Œå…¶å®æ˜¯å› ä¸º `GoDot` æˆ‘ä¸æ€ä¹ˆä¼šç”¨ï¼Œ2333 â€¦â€¦ï¼‰

è€Œåœ¨ JS ç”Ÿæ€é‡Œï¼Œ2D æœ‰ `phaser / pixi.js` ï¼Œ3D æœ‰ `three.js` ï¼Œç›®å‰éƒ½éå¸¸èƒ½æ‰“ï¼Œæ‰€ä»¥æœ€ç»ˆé€‰æ‹©äº† `phaser`ã€‚

![image-20230925084426852](https://poketto.oss-cn-hangzhou.aliyuncs.com/zywc7c.jpg)

`phaser` ç”±äºç»å¸¸è¢«ç”¨äºåˆ¶ä½œ rpg æ¸¸æˆï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿèå…¥äº†ä¸€äº› rpg å…ƒç´ ï¼Œæ‘¸ç´¢ `phaser` ä¹ŸèŠ±äº†ä¸€å®šçš„æ—¶é—´ï¼Œä½†æœ€å¥½çš„å­¦ä¹ èµ„æ–™å°±æ˜¯ `phaser` ï¼ˆ v3 ç‰ˆæœ¬ï¼‰çš„å®˜æ–¹æ¡ˆä¾‹åº“ï¼š

- photonstorm/phaser3-examples: Phaser 3 Examples, https://github.com/photonstorm/phaser3-examples

å®ƒçš„åœ¨çº¿ demo åšçš„å¾ˆé«˜ç«¯ï¼ˆsha biï¼‰ï¼Œç«Ÿç„¶ç”¨çš„æ˜¯æ–‡ä»¶å¤¹çš„å½¢å¼ï¼Œä½†æ˜¯è¯·ç›¸ä¿¡æˆ‘ï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹éƒ½è¿‡ä¸€è¿‡ï¼Œè¿™ç»å¯¹æ˜¯æœ€å¥½çš„èµ„æ–™ï¼Œä¸ä»£ç åº“ç›´æ¥å¯¹æ¥ï¼Œå¦åˆ™ç»å¯¹éƒ½æ˜¯èˆè¿‘æ±‚è¿œäº†ï¼š

![image-20230925102310842](https://poketto.oss-cn-hangzhou.aliyuncs.com/image-20230925102310842.png)

æ¯”å¦‚æˆ‘ä»¬å¯çˆ±çš„ `nayuki` åŒå­¦ï¼Œå°±æ˜¯åœ¨ `/Input/Dragging` é‡Œä¸€çœ¼ç›¸ä¸­çš„ï¼š

![image-20230925075546752](https://poketto.oss-cn-hangzhou.aliyuncs.com/cuz3c8.jpg)

ç„¶åæˆ‘ä»¬æ¸¸æˆé‡Œå¹ç¾½æ¯›æ—¶çš„é¾™å·é£ï¼Œå…¶å®æœ¬æ¥æ˜¯æƒ³ç›´æ¥ç”¨ `/Animation/Yoyo` é‡Œçš„ç«ç„°ï¼Œä½†æ˜¯ä»£ç é‡Œæ˜¯åŸºäºå›¾åƒçš„åˆ‡ç‰‡å®ç°çš„ï¼Œç«ç„°ä¸è§’è‰²æ˜¯æ··åœ¨ä¸€èµ·çš„ï¼Œä¸æ–¹ä¾¿åˆ‡ï¼Œæ‰€ä»¥å°±æ”¾å¼ƒäº†ã€‚

![image-20230925102348410](https://poketto.oss-cn-hangzhou.aliyuncs.com/image-20230925102348410.png)

æœ€åæˆ‘ä»¬æ˜¯ç»“åˆ ChatGPT4 è‡ªå·±æ‰‹å†™äº†æ‰‡å½¢è’™ç‰ˆåŠ¨ç”»ï¼Œå¹¶ç²¾å¿ƒæŒ‘é€‰äº†é™æ€é¾™å·é£ png ç»„åˆå®Œæˆï¼š

![image-20230925075644351](https://poketto.oss-cn-hangzhou.aliyuncs.com/waxnee.jpg)

æœ€ç»ˆæ•ˆæœï¼Œå°±æ˜¯é…·ç‚«çš„åŠ¨æ€é¾™å·é£äº†ï¼š

![RPReplay_Final1695640188 (2)](https://poketto.oss-cn-hangzhou.aliyuncs.com/RPReplay_Final1695640188%20(2).gif)

## æ ¸å¿ƒæŠ€æœ¯æ±‡æ€»

### FPS

 å¸§åŒæ­¥ä¸»è¦ç“¶é¢ˆä¸€èˆ¬æ˜¯åœ¨å®¢æˆ·ç«¯ä¸Šï¼Œå› ä¸ºå®¢æˆ·ç«¯ä¸ä½†è¦å¤„ç†æ•°æ®æ›´æ–°ï¼Œè¿˜è¦å¤„ç†æ•°æ®æ¸²æŸ“ï¼ŒUI ä¸äº‹ä»¶ä¼šæŠ¢è¿›ç¨‹ï¼Œå†åŠ ä¸Šä¸åç«¯æ¥å£æ•°æ®äº¤äº’æœ‰å»¶æ—¶ï¼Œå°±ä¼šæœ‰æ˜æ˜¾çš„æ‰å¸§ã€‚

å› æ­¤åœ¨ç½‘é¡µç«¯ï¼Œå‡ ä¹éƒ½æ˜¯ 30 FPS å·¦å³ï¼Œ60 FPS éƒ½è¦é£æ‰‡å‘çƒ­äº†ï¼Œæ›´é«˜ï¼ˆæ¯”å¦‚ 90 FPSã€120 FPSï¼‰å°±åªæœ‰åœ¨è®¾å¤‡ç»ˆç«¯æœ¬æœºç¯å¢ƒã€ç”µå½±é™¢ç­‰æ‰æ”¯æŒäº†ã€‚

è€Œåœ¨å®¢æˆ·ç«¯å‘æœåŠ¡å™¨è·å–æ•°æ®ä¸Šï¼Œæœ‰å‡ ç§åŠæ³•ï¼Œé™¤äº† socket ä¹‹å¤–ï¼Œéƒ½æ˜¯å®¢æˆ·ç«¯ä¸»åŠ¨å‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚çš„ï¼Œä»¥ä¸‹ç»™å‡ºå‡ ç§åŠæ³•ã€‚

1. `useInterval`

è€Œåœ¨å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬ä¸€å¼€å§‹æ˜¯ä½¿ç”¨ä¸€ä¸ª `useInterval`å‡½æ•°ï¼Œå®ƒå¯ä»¥æ¯éš” N ms åˆ·æ–°ä¸€æ¬¡ UIï¼Œä»¥ä¸‹æ˜¯æˆ‘ä»¬åç«¯å°å“¥å“¥å’Œ `@mantine/hooks`é‡Œ`useInterval`å†™æ³•çš„å¯¹æ¯”ï¼š

![image-20230925102451944](https://poketto.oss-cn-hangzhou.aliyuncs.com/image-20230925102451944.png)

å¯¹æ¯”ä¸‹æ¥ï¼Œå¦‚æœä¸æ¶‰åŠä¸»åŠ¨æ§åˆ¶ï¼Œç¡®å®è¿˜æ˜¯æˆ‘ä»¬å°å“¥å“¥å†™çš„ç®€å•æ–¹ä¾¿ï¼Œè€Œä¸”ç”±äºæ¯æ¬¡éƒ½ä¼ å…¥æœ€æ–°çš„ `cb`ï¼Œå› æ­¤ä¸ä¼šæœ‰è„æ•°æ®çš„é—®é¢˜ã€‚

2. åŸºäº `trpc`

å¯ä»¥åŸºäº `referchInterval` å‚æ•°ï¼Œè‡ªåŠ¨æ¯ N ms è·å–ä¸€æ¬¡æ•°æ®ã€‚

```tsx
  const { data, isFetching } = trpc.syncServer.useQuery(
    { roomId, eventsId: eventsIdRef.current },
    {
      enabled: !!roomId,
      refetchInterval: 1000 / CONFIG.game.fps.client,
    }
  )
```

ä½†ä½¿ç”¨ trpc ä¹Ÿè¦è°¨æ…ï¼Œæœ‰æ—¶ä¼šå‡ºç° `isFetching = false, data=undefined`çš„æƒ…å†µï¼Œè¿™è¿˜æ˜¯ä¸€ä¸ªæš‚æ—¶ç•™å¾…å»ç ”ç©¶çš„å° bugã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œå€’æ˜¯é—®é¢˜ä¸å¤§ã€‚

3. åŸºäºæ¸¸æˆå¼•æ“çš„ nextTick æœºåˆ¶

æ¸¸æˆå¼•æ“é‡Œéƒ½ä¼šæœ‰ä¸€ä¸ªç±»ä¼¼ `init` å’Œ `onUpdate` çš„æœºåˆ¶ï¼Œæ¯ä¸ª tick éƒ½ä¼šè‡ªåŠ¨è§¦å‘ `onUpdate` å‡½æ•°ã€‚åœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢æˆ‘ä»¬å¯ä»¥å¤„ç†æ•°æ®çš„æ›´æ–°ã€‚

```tsx
// update å‡½æ•°é‡Œéå¸¸é€‚åˆå¤„ç† Input äº‹ä»¶
update(time, delta) {
    // this.tick++
    // const fps = Math.round((1000 / delta) * 10) / 10
    // console.log({time, delta, tick: this.tick, fps})

    const step = this.vw / 100
    if (this.keys.A.isDown || this.keys.LEFT.isDown) this.player!.x -= step
    if (this.keys.D.isDown || this.keys.RIGHT.isDown) this.player!.x += step
    // åªè¦æŒ‰ä½å°±ä¼šä¸€ç›´feedback
    if (this.keys.SPACE.isDown) {
      if (!this.isSpacingPressing) {
        this.isSpacingPressing = true
        this.lastDownTime = Date.now()
        // console.log("down: ", this.lastDownTime)
      }
    }
    if (this.keys.SPACE.isUp) {
      if (this.isSpacingPressing) {
        // ä¸è€ƒè™‘dragäº†
        // console.log("up: ", Date.now() - this.lastDownTime)
        this.handleShoot(Date.now() - this.lastDownTime)
      }
      this.isSpacingPressing = false
    }

    this.updatePlayerX(this.player!.x)
  }

```

### socket ä¸ nextjs çš„é›†æˆ

å¤šäººåœ¨çº¿ç©æ¸¸æˆæ˜¯ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†å®é™…ä¸Šé¢‡æœ‰æŠ€å·§çš„ä¸€ä»¶äº‹ï¼Œä¸€èˆ¬éƒ½ç”¨ socketï¼Œä½†ä¹Ÿæœ‰å…¶ä»–çš„æ–¹æ¡ˆã€‚

è¿™é‡Œç®€å•è¯´ä¸€ä¸‹æˆ‘ä»¬é›†æˆ `socket.io` åˆ° `nextjs` é‡Œçš„ä¸€äº›è¦ç‚¹ï¼š

é¦–å…ˆä¸€ä¸ªéå¸¸å¤§çš„å‘æ˜¯ï¼Œ`nextjs@13.4.12`ç¯å¢ƒä¸‹ï¼Œ`socket.io`æœåŠ¡å™¨ç«¯éœ€è¦é¢å¤–é…ç½®`addTrailingSlash: false`ï¼Œå¦åˆ™ä¼šè‡ªåŠ¨åŠ ä¸Š `/` å¯¼è‡´ api è®¿é—®å‡ºé”™ï¼Œå…·ä½“å‚è€ƒï¼šhttps://github.com/vercel/next.js/issues/49334#issuecomment-1539268823

å…¶æ¬¡ï¼Œç”±äº `socket.io` é»˜è®¤æŒ‚è½½åœ¨ `/socket.io/` è·¯å¾„ä¸‹ï¼Œä¸ `nexjts` é»˜è®¤çš„ api è·¯ç”±å¹¶ä¸ä¸€è‡´ï¼Œå› æ­¤éœ€è¦åšä¸€äº›å¤„ç†ï¼Œè¿™é‡Œæä¾›ä¸‰ç§åŠæ³•ã€‚

1. æ˜¾å¼æŒ‡å®š socket æŒ‚è½½çš„è·¯å¾„ï¼š

```ts
// [server] /pages/api/socket.ts 
export default async function handler(
  req: NextApiRequest,
  res: NextApiResponseServerIO
) {
  if (res.socket.server.io) {
    // console.log("Socket is already running")
  } else {
    console.log("initializing Socket.io server...")  
    
    // adapt Next's net Server to http Server
		const httpServer: NetServer = res.socket.server as any
    const server = new Server(httpServer, {
      path: SOCKET_IO_ENDPOINT,
      addTrailingSlash: false,
    }
                              
     handleSocket(server)

    // append SocketIO server to Next.js socket server response
    res.socket.server.io = server
  }

  res.end()
}                            ...
                  

// [client] /lib/socket.ts
export const socket = socketio(
  // ä¸éœ€è¦æ·»åŠ  urlï¼Œç›´æ¥æŒ‡å®š pathå³å¯
  {
    transports: [
      // "websocket", // ä¸èƒ½å¼€ websocketï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼
      "polling", // è¿™æ˜¯é»˜è®¤çš„ï¼Œå…³äº†åå°±æ²¡æ³•ç”¨äº†
    ], // ref: https://stackoverflow.com/a/41953165/9422455
    path: SOCKET_IO_ENDPOINT,
    autoConnect: false,
    timeout: 1000,
  }
)
```

2. æ— è®ºæ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡å™¨ç«¯ï¼Œéƒ½ä¸æŒ‡å®š pathï¼Œè€Œæ˜¯åŸºäº fetch æ¿€æ´»æœåŠ¡ç«¯è·¯ç”± ï¼ˆå¾ˆå¤šå¸–å­é‡Œéƒ½æ˜¯ç”¨çš„è¿™ç§åŠæ³•ï¼Œå¾ˆç¥å¥‡ï¼‰

```ts
 const init = async () => {
    // è¦å…ˆå”¤é†’ä¸€ä¸‹æœåŠ¡å™¨
    await fetch("/api/socket")

    // no-op if the socket is already connected
    console.log("connecting")
    socket.connect()

    for (const event of allEvents) {
      console.log("on handler of ", event.name)
      socket.on(event.name, event.handler)
    }

    socket.on("connect", () => {
      // å®¢æˆ·ç«¯æœ‰å¯èƒ½éƒ½æ²¡æœ‰ç›‘å¬ UserJoinRoomï¼Œä½†æ˜¯æœåŠ¡ç«¯æˆ‘ä»¬è¦åŠ ï¼Œå¦åˆ™å®¢æˆ·ç«¯å®¹æ˜“bug
      socket.emit(SocketEvent.UserJoinRoom, {
        content: `user ${socket.id} joined room ${roomId}`,
        ...extra,
        socketId: socket.id,
      } as IFullMsg)
    })
  }
```

3. è¿˜æœ‰ä¸€ç§åŠæ³•ï¼Œæ˜¯å•å¼€ä¸€ä¸ª nodejs æœåŠ¡ï¼Œä½¿ç”¨ middleware å½¢å¼å¯åŠ¨ socketï¼Œç”±äºæˆ‘ä¸ªäººä¸æ˜¯å¾ˆå–œæ¬¢ï¼Œæ‰€ä»¥å°±ä¸æ”¾äº†ã€‚ä½†ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ä¸€ç§åŠæ³•ã€‚ä¹Ÿå¾ˆç›´æ¥ã€‚

é™¤äº†ä»¥ä¸Šçš„ä¸€äº›è¦ç‚¹ä¹‹å¤–ï¼Œåœ¨ socket çš„å†™æ³•ä¸Šä¹Ÿæœ‰å„ç§åŠæ³•ï¼Œæˆ‘æ˜¯ç”¨äº†ä¸€ä¸ª `useSocketEvents` ç»Ÿä¸€ç®¡ç†éœ€è¦ç›‘å¬çš„å‡½æ•°ï¼Œæ³¨æ„æœ€åè¦ä½¿ç”¨ `beforeunload` çš„ eventListener åšæ¸…ç†åŠ¨ä½œï¼Œå¦åˆ™ç”¨æˆ·åˆ·æ–°æµè§ˆå™¨ï¼Œsocketè¿˜æ´»ç€ï¼Œä¸ç¬¦åˆé¢„æœŸã€‚

```tsx
export interface Event {
  name: string

  handler(...args: any[]): any
}

export const defaultEvents: Event[] = [
  // { name: "connect", handler: console.log },
  { name: "connect_error", handler: console.error },
  { name: "disconnect", handler: console.log },
]

/**
 * ref: https://www.codeconcisely.com/posts/react-socket-io-hooks/
 */
export function useSocketEvents(events: Event[], extra: IMsg) {
  console.log("using socket events")
  const { roomId, userImage } = extra
  const allEvents: Event[] = [...defaultEvents, ...events]

  const cleanup = () => {
    console.log("disconnecting")
    socket.disconnect()

    for (const event of allEvents) {
      console.log("off handler of ", event.name)
      socket.off(event.name)
    }
  }
  ...
  
   useEffect(() => {
    void init()

    window.addEventListener("beforeunload", cleanup)

    return () => {
      // note: important! reactä¸ä¼šè‡ªå·±æ¸…é™¤ï¼Œref: https://stackoverflow.com/a/61310052/9422455
      window.removeEventListener("beforeunload", cleanup)
    }
  }, [])
}
```



### æ¸¸æˆå¼•æ“ä¸ React/NextJS çš„é›†æˆ

è¯šå¦‚è¿™ä½è€å“¥æ‰€è¨€ï¼Œ React å¯ä»¥ä¸æ¸¸æˆé›†æˆï¼Œä½†æ˜¯ä»…é™äºç”¨äºåˆ¶ä½œ UI ä¸Šï¼Œè¦æ³¨æ„ä¸æ¸¸æˆçš„ä»£ç åˆ†ç¦»ã€‚

![image-20230925102547276](https://poketto.oss-cn-hangzhou.aliyuncs.com/image-20230925102547276.png)

æˆ‘ä¹Ÿé¡ºåˆ©æ‰¾åˆ°äº†å°† `phaser` ä¸ å…¶ä»–é›†æˆçš„æ¨¡æ¿ï¼š

- ã€pahser + webpackã€‘nodes777/phaser3-react-template: A starter template for using PhaserJS and React, https://github.com/nodes777/phaser3-react-template
- ã€phaser + create-react-appã€‘kevinshen56714/create-react-phaser3-app: Minimal Phaser3 + Create React App template, https://github.com/kevinshen56714/create-react-phaser3-app
- ã€phaser + ion-phaserã€‘proyecto26/ion-phaser: A web component to use Phaser Framework with Angular, React, Vue, etc ğŸ®, https://github.com/proyecto26/ion-phaser
- ã€phaser + nexjtsã€‘ isrmicha/nextjs-phaser: NextJs Phaser Starter Template, https://github.com/isrmicha/nextjs-phaser

æˆ‘ä¸ªäººæ¯”è¾ƒå–œæ¬¢ `nextjs`ï¼Œå› æ­¤åŸºäºæœ€åçš„æ”¹äº†æ”¹ï¼Œå…¶å®æ ¸å¿ƒè¦é¢†ï¼Œå°±æ˜¯è¦ç”¨ `dynamic` ç»„ä»¶ï¼Œå› ä¸º `phaser` ä¸æ”¯æŒ `ssr`ï¼Œå¦åˆ™ä¼šç”šè‡³æœ‰ `HTMLVideoElement is not defined` çš„é—®é¢˜ã€‚

### åŠ›å¯¼å‘

åœ¨ `phaser` ä¸­æä¾›äº†å‡ ä¸ªå…³äº `applyForce` ç›¸å…³çš„å‡½æ•°ï¼Œéƒ½æ˜¯åŸºäº `matter.js` çš„ã€‚

ä¸»è¦æœ‰ä¸‰ä¸ª APIï¼Œéƒ½åœ¨ `Phaser.Physics.Matter.MatterPhysics` ä¸‹ï¼Œå‚è€ƒï¼šhttps://newdocs.phaser.io/docs/3.54.0/Phaser.Physics.Matter.MatterPhysics#applyForceFromAngle

- `applyForce(bodies, force)`: Applies a force to a body, at the bodies current position, including resulting torque.
- `applyForceFromPosition(bodies, position, speed, [angle])`: 
  - Applies a force to a body, from the given world position, including resulting torque. If no angle is given, the current body angle is used.
  - Use very small speed values, such as 0.1, depending on the mass and required velocity.
  - æ³¨æ„è¿™é‡Œçš„ `position` æ˜¯æ‘„åƒæœºé‡Œçš„ç›®æ ‡ä½ç½®ï¼Œè€Œéå¹³é¢åæ ‡ä½ç½®ï¼Œå…³äºè¿™ä¸ªï¼Œè°ƒäº†å¾ˆä¹…ï¼
- `applyForceFromAngle(bodies, speed, [angle])`: 
  - Apply a force to a body based on the given angle and speed. If no angle is given, the current body angle is used.
  - Use very small speed values, such as 0.1, depending on the mass and required velocity.

æˆ‘å¾ˆæƒ³ç»™å¤§å®¶ç”»ç‚¹ç¤ºæ„å›¾ï¼Œå› ä¸ºå®˜ç½‘çš„æ–‡æ¡£ç»™çš„å¹¶ä¸è¯¦ç»†ï¼Œå¹¶ç»™å‡ºå¤šç§åŠ›å¯¼å‘çš„åšæ³•ï¼Œæ¯”å¦‚ç”Ÿæˆä¸€ä¸ª matter bodyï¼Œæˆ–è€…ç”Ÿæˆè™šæ‹Ÿçš„å½¢çŠ¶ï¼Œè¿™ä¸¤ç§å„æœ‰åˆ©å¼Šï¼Œä½†æ­¤å¤„é™äºç¯‡å¹…ï¼Œæš‚æ—¶å°±ä¸èµ˜è¿°äº†æŠŠï¼

ç›®å‰æˆ‘ä»¬æ˜¯ä½¿ç”¨äº†åŸºäºç‚¹ä½ç½®çš„æ‰‡å½¢åŠ›å¯¼å‘ï¼Œä½†å…¶å®ä¹Ÿå¾ˆæ–¹ä¾¿åšå¤šç§å¯¼å‘ï¼ˆç±»æ¯” moba æ¸¸æˆçš„è‹±é›„æŠ€èƒ½ï¼ï¼‰ã€‚

## å…¶ä»–

### å¾®ä¿¡å°æ¸¸æˆ

æˆ‘ä»¬æœ¬æ¥æƒ³è¦åšå¾®ä¿¡å°æ¸¸æˆçš„ï¼Œç»“æœéœ€è¦è‡³å°‘ä¸€ä¸ªæœˆçš„å®¡æ ¸ï¼Œå¹¶ä¸”è¿˜éœ€è¦è½¯è‘—ï¼Œè§‰å¾—æ²¡å¿…è¦ï¼Œå°±æ²¡æäº†ã€‚ã€‚ã€‚

- (16)å°æ¸¸æˆæ¸²æŸ“ | å¾®ä¿¡å¼€æ”¾ç¤¾åŒº, https://developers.weixin.qq.com/community/develop/doc/000e0e01990300540807830c951009
- å°ç¨‹åºèµ„è´¨å®¡æ ¸, https://mp.weixin.qq.com/wxamp/frame/pluginRedirect/pluginRedirect?title=&action=plugin_redirect&token=445115645&lang=zh_CN&plugin_uin=1031&custom=isApplyPayPc%3Dfalse
- ä¸ªäººå¼€å‘è€…çš„æ¸¸æˆè‡ªå®¡è‡ªæŸ¥æŠ¥å‘Šæ˜¯å¦æŒ‰ç…§å®˜æ–¹çš„æˆªå›¾ï¼Œæ‰“å°å‡ºæ¥åç­¾åï¼Œç„¶åæ‹ç…§å³å¯ï¼Ÿ | å¾®ä¿¡å¼€æ”¾ç¤¾åŒº, https://developers.weixin.qq.com/community/develop/doc/0000026f4c4548ca35198fbd851800
- â€»â€»ç”³è¯·è½¯è‘—æ ‡æœ¬&å°æ¸¸æˆæäº¤çš„æŠ€å·§â€»â€» - éæŠ€æœ¯ - Cocosä¸­æ–‡ç¤¾åŒº, https://forum.cocos.org/t/topic/69267

### JS/React ç›¸å…³æ¸¸æˆèµ„æºã€æ•™ç¨‹

å¼ºæ¨ä¸€æ¬¾éœ€è¦ 64 G å†…å­˜çš„è¶…å¤§å‹å¤šäººåœ¨çº¿æ²™ç›’æ¸¸æˆï¼ŒåŸºäº nextjs + webgl + webAssembly çš„ï¼šBiomes â€” Join the community shaping a new world, https://www.biomes.gg/

- Games - React.js Examples, https://reactjsexample.com/tag/games/
- Building Steam Games with React â€” Syntax Podcast 176, https://syntax.fm/show/176/building-steam-games-with-react
- Building a Game with Three.js, React and WebGL â€” SitePoint, https://www.sitepoint.com/building-a-game-reactjs-and-webgl/
- Mario Jump, https://mariojumpp.vercel.app/

## æœ€å

å“ˆå“ˆå“ˆï¼Œæœ¬æ¥ä»¥ä¸ºä¸¤å°æ—¶å°±èƒ½æå®šçš„å°æ¸¸æˆï¼Œæ²¡æƒ³åˆ°æ‰¯å‡ºè¿™ä¹ˆå¤šçŠŠå­ï¼Œå“ˆå“ˆå“ˆå“ˆï¼ŒçœŸåœ°æ²¡è°äº†ï¼

æœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥ä¸€èµ·å¼€å‘ V7 å¹ç¾½æ¯›å‘€ã€‚ï¼ˆæˆ–è€…ä¸ä¼šå†™ä»£ç ï¼Œå»ç‚¹ä¸ªèµä¹Ÿå¯ä»¥å•Š ğŸ‘€ ï¼‰

- V2 ï¼ˆå®éªŒç‰ˆæœ¬ã€‚åŸºäº `socket.io`ï¼Œå¤šäººä¸–ç•Œæ¨¡å‹ï¼‰

- V4 ï¼ˆè¿™ä¸ªç‰ˆæœ¬å®Œæˆåº¦æœ€é«˜ã€‚åŸºäº `react-three-fiber`ï¼Œæœªæ¥æœ‰ 3D æ¸²æŸ“/æ¸¸æˆçš„éœ€æ±‚ï¼Œè¿™ä¸ª library æ˜¯é¦–é€‰ï¼‰

  - å¼€å‘åœ°å€ï¼šhttps://github.com/cs-magic/feather-v4

  - ä½“éªŒç½‘å€: https://f4.cs-magic.cn

- V7 ï¼ˆç›®å‰çš„ä¸»åŠ›ç‰ˆæœ¬ã€‚åŸºäº `phaser`ï¼Œç›®å‰å¯¹è¿™ä¸ªæ›´æ„Ÿå…´è¶£ï¼Œå› ä¸ºæ¥ä¸‹æ¥æƒ³å€ŸåŠ© `phaser` åšä¸€äº›åŸºäº AIGC çš„ 2D RPG æ¸¸æˆï¼‰

  - å¼€å‘åœ°å€ï¼šhttps://github.com/cs-magic/feather-v7

  - ä½“éªŒç½‘å€: https://f7.cs-magic.cn

ä»¥ä¸Šï¼æˆ‘ä»¬ä¸‹æ¬¡å†è§ï¼

**ä½†æ„¿æˆ‘ä»¬æ¯ä¸ªäººéƒ½èƒ½åŠ è–ªï¼**

