
```insta-toc
---
title:
  name: Table of Contents
  level: 1
  center: false
exclude: ""
style:
  listType: dash
omit: []
levels:
  min: 1
  max: 6
---

# Table of Contents

- 开源调研
- 付费调研
- 实测 1，效果不太行
- 实测 2，这个还不错
- 灵感：另一种换脸思路
```

## 开源调研
- 1. [实时“人脸”模糊！实战教程-腾讯云开发者社区-腾讯云](https://cloud.tencent.com/developer/article/1872946)， 用的 opencv+mediapipe，但是参考内容 https://google.github.io/mediapipe/solutions/face_mesh.html 挂掉了
- 2. [流行人脸检测和模糊算法的实战较量，谁是王者？-51CTO.COM](https://www.51cto.com/article/768708.html)，这篇2023 年10 月的文章对比了几种算法，最后选择了 YoloV5，YOLO(You Only Look Once)算法是一种用于检测包括人脸在内的大量对象的算法。与前代产品不同，YOLO通过神经网络进行单次检测，使其更快、更适合实时应用程序和视频场景。含有代码，应该可以重点考虑。
- 3. [使用 OpenCV 和 Python 在直播中模糊人脸](https://mp.weixin.qq.com/s/JqSD9ITKbQdomciIiKKq-w)，这篇 22 年的也不错，也有详细的代码
- [CN110472566B - 一种高精度的模糊人脸识别方法 - Google Patents](https://patents.google.com/patent/CN110472566B/zh)
- [Blur and anonymize faces with OpenCV and Python - PyImageSearch](https://pyimagesearch.com/2020/04/06/blur-and-anonymize-faces-with-opencv-and-python/)，这篇文章更好，但是要付费参加大学
- [OpenGL ES 实现多种“马赛克滤镜”效果 - 实时互动网](https://www.nxrte.com/jishu/18022.html)
- [MediaPipe Studio](https://mediapipe-studio.webapps.google.com/studio/demo/face_landmarker)，重点
- [全网最强AI去马赛克工具，马赛克再见！【Git源宝】_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1J1bceAEEK/?vd_source=9cb028fe6c978c6816626901d9249eb1)
- [sczhou/CodeFormer: [NeurIPS 2022] Towards Robust Blind Face Restoration with Codebook Lookup Transformer](https://github.com/sczhou/CodeFormer)

## 付费调研

- [人脸识别_人脸检测_人脸对比_人脸搜索_活体检测_百度智能云](https://ai.baidu.com/ai-doc/FACE/yk37c1u4t)，人脸模糊的核心算法是人脸检测，检测到了之后再用像素模糊或者高斯模糊即可，但需要包一层
- [匠韵智能](http://www.aicv.club/product/aicv)，这个 google 搜「人脸模糊」，很多水文，应该是专门做这个的核心业务，不知道业绩如何

![image.png](https://poketto.oss-cn-hangzhou.aliyuncs.com/20250409022547.png?x-oss-process=image/resize,w_800/quality,q_95)


## 实测 1，效果不太行

[流行人脸检测和模糊算法的实战较量，谁是王者？-51CTO.COM](https://www.51cto.com/article/768708.html)，这篇2023 年10 月的文章对比了几种算法，最后选择了 YoloV5，YOLO(You Only Look Once)算法是一种用于检测包括人脸在内的大量对象的算法。与前代产品不同，YOLO通过神经网络进行单次检测，使其更快、更适合实时应用程序和视频场景。含有代码，应该可以重点考虑。

```shell
pip install opencv-python yoloface ipython
```

```shell
➜  /Users/mark/projects/2025-04-09_face-blur git:(main) ✗ python main.py -i data/test-1.mp4
2025-04-09 01:44:25,147 - INFO - 未指定输出路径，使用默认路径: data/test-1_out.mp4
2025-04-09 01:44:25,147 - INFO - 开始处理视频: data/test-1.mp4
Downloading...
From: https://drive.google.com/uc?id=1JYrRT4Xe-NTrxYGhcj_hy7NtL4D2c77v
To: /Users/mark/projects/2025-04-09_face-blur/.yoloface/yolov3-tiny_face.weights
100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 34.7M/34.7M [00:06<00:00, 5.13MB/s]
Downloading...
From: https://drive.google.com/uc?id=1S4W6mpOQgVvjpPupbhW6rHFjl-OaUR-g
To: /Users/mark/projects/2025-04-09_face-blur/.yoloface/yolov3_tiny_face.cfg
100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 2.09k/2.09k [00:00<00:00, 5.31MB/s]
Downloading...
From (original): https://drive.google.com/uc?id=1EFlRsOA6oGLLBH2VMDOqHSfDI70CDXeW
From (redirected): https://drive.google.com/uc?id=1EFlRsOA6oGLLBH2VMDOqHSfDI70CDXeW&confirm=t&uuid=0ce0807a-9d71-440c-9554-7788d97eb82d
To: /Users/mark/projects/2025-04-09_face-blur/.yoloface/face_detection.weights
100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 246M/246M [01:21<00:00, 3.03MB/s]
Downloading...
From: https://drive.google.com/uc?id=1ZxUmO0B1435taazz8P0Pqjq8r8Rypeip
To: /Users/mark/projects/2025-04-09_face-blur/.yoloface/face_detection.cfg
100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 8.34k/8.34k [00:00<00:00, 9.60MB/s]
2025-04-09 01:46:26,776 - INFO - 视频信息: 368x640 @ 23fps, 共3157帧
2025-04-09 01:46:26,776 - INFO - 处理模式: 模糊, 模型: tiny
OpenCV: FFMPEG: tag 0x34363248/'H264' is not supported with codec id 27 and format 'mp4 / MP4 (MPEG-4 Part 14)'
OpenCV: FFMPEG: fallback to use tag 0x31637661/'avc1'
100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▉| 3155/3157 [00:53<00:00, 63.04it/s]2025-04-09 01:47:20,483 - INFO - 处理完成: 共 3157 帧, 平均每帧处理时间 0.0165 秒
100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 3157/3157 [00:53<00:00, 58.79it/s]
2025-04-09 01:47:20,539 - INFO - 视频处理完成，已保存至: data/test-1_out.mp4
➜  /Users/mark/projects/2025-04-09_face-blur git:(main) ✗ 
```

效果不太行。

![image.png](https://poketto.oss-cn-hangzhou.aliyuncs.com/20250409014752.png?x-oss-process=image/resize,w_800/quality,q_95)

## 实测 2，这个还不错

参考 [使用 OpenCV 和 Python 在直播中模糊人脸](https://mp.weixin.qq.com/s/JqSD9ITKbQdomciIiKKq-w)，还是可行的，但有时候没有检测到我。

> 感觉我盯着摄像头的时候它更容易找到我。🤔

![image.png](https://poketto.oss-cn-hangzhou.aliyuncs.com/20250409021132.png?x-oss-process=image/resize,w_800/quality,q_95)


在 AI 修改后，非常棒，但是多了一些误检测。

![image.png](https://poketto.oss-cn-hangzhou.aliyuncs.com/20250409020933.png?x-oss-process=image/resize,w_800/quality,q_95)

## 灵感：另一种换脸思路

先打码，再用还原算法解码，这样就和原视频不一样了，而且还能看🤔

参考：
- [Blur and anonymize faces with OpenCV and Python - PyImageSearch](https://pyimagesearch.com/2020/04/06/blur-and-anonymize-faces-with-opencv-and-python/)
- [MediaPipe Studio](https://mediapipe-studio.webapps.google.com/studio/demo/face_landmarker)
- [全网最强AI去马赛克工具，马赛克再见！【Git源宝】_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1J1bceAEEK/?vd_source=9cb028fe6c978c6816626901d9249eb1)
- [sczhou/CodeFormer: [NeurIPS 2022] Towards Robust Blind Face Restoration with Codebook Lookup Transformer](https://github.com/sczhou/CodeFormer)

